generator client {
    provider        = "prisma-client-js"
    previewFeatures = ["fullTextSearch", "fullTextIndex"]
}

datasource db {
    provider = "mysql"
    url      = env("DATABASE_URL")
}

// Enums
enum Settings {
    SERVER_SETTINGS
}

enum Status {
    DEFAULT
    READONLY
    NOPURCHASE
    DISABLED
}

enum Stock {
    IN_STOCK
    OUT_STOCK
    DISCONTINUED
    HIDDEN
}

// Database
model System {
    id       Settings @id @default(SERVER_SETTINGS)
    status   Status   @default(DEFAULT)
    currency String   @default("CAD")
    ratings  Boolean  @default(true)
}

model Products {
    id          String    @id @default(uuid())
    title       String
    subtitle    String?
    description String
    images      String
    tags        String
    price       Float
    ratings     Ratings[]
    stock       Stock     @default(IN_STOCK)
    createdAt   DateTime  @default(now())
    updatedAt   DateTime  @updatedAt

    @@fulltext([title])
    @@fulltext([title, subtitle])
}

model Ratings {
    id          String    @id @default(uuid())
    user        String
    name        String    @default("Anonymous")
    description String?
    rating      Float
    product     Products? @relation(fields: [productID], references: [id])
    productID   String?

    @@unique([user, productID])
}
